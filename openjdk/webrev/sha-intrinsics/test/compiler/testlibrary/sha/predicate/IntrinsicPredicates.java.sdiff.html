<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>hotspot Sdiff test/compiler/testlibrary/sha/predicate </title>
</head><body id="SUNWwebrev">
<center><a href='../../../../../test/compiler/intrinsics/sha/cli/testcases/GenericTestCaseForOtherCPU.java.sdiff.html' target='_top'>&lt prev</a> <a href='../../../../../index.html' target='_top'>index</a> <a href='../../../../../src/cpu/ppc/vm/macroAssembler_ppc_sha.cpp.sdiff.html' target='_top'>next &gt</a></center>
<h2>test/compiler/testlibrary/sha/predicate/IntrinsicPredicates.java</h2>
<a class="print" href="javascript:print()">Print this page</a>
<pre>rev <a href="https://bugs.openjdk.java.net/browse/JDK-12651">12651</a> : Sha2 intrinsics implementation</pre>

<table><tr valign="top">
<td><pre>

</pre><hr></hr><pre>
  54         long tieredMaxLevel = IntrinsicPredicates.WHITE_BOX.getIntxVMFlag(
  55                 "TieredStopAtLevel");
  56         boolean maxLevelIsReachable = (tieredMaxLevel
  57                 == IntrinsicPredicates.TIERED_MAX_LEVEL);
  58         return Platform.isServer() &amp;&amp; !Platform.isEmulatedClient() &amp;&amp; (!isTiered || maxLevelIsReachable);
  59     };
  60 
  61     public static final BooleanSupplier SHA1_INSTRUCTION_AVAILABLE
  62             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha1" }, null),
  63               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha1" }, null),
  64               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha1" }, null),
  65               // x86 variants
  66               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha" },  null),
  67               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha" },  null),
  68                               new CPUSpecificPredicate("x86.*",     new String[] { "sha" },  null))))));
  69 
  70     public static final BooleanSupplier SHA256_INSTRUCTION_AVAILABLE
  71             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha256"       }, null),
  72               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha256"       }, null),
  73               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha256"       }, null),

  74               // x86 variants
  75               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha"          }, null),
  76               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha"          }, null),
  77               new OrPredicate(new CPUSpecificPredicate("x86.*",     new String[] { "sha"          }, null),
  78               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "avx2", "bmi2" }, null),
<span class="changed">  79                               new CPUSpecificPredicate("x86_64",    new String[] { "avx2", "bmi2" }, null))))))));</span>
  80 
  81     public static final BooleanSupplier SHA512_INSTRUCTION_AVAILABLE
  82             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha512"       }, null),
  83               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha512"       }, null),
  84               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha512"       }, null),

  85               // x86 variants
  86               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha"          }, null),
  87               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha"          }, null),
  88               new OrPredicate(new CPUSpecificPredicate("x86.*",     new String[] { "sha"          }, null),
  89               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "avx2", "bmi2" }, null),
<span class="changed">  90                               new CPUSpecificPredicate("x86_64",    new String[] { "avx2", "bmi2" }, null))))))));</span>
  91 
  92     public static final BooleanSupplier ANY_SHA_INSTRUCTION_AVAILABLE
  93             = new OrPredicate(IntrinsicPredicates.SHA1_INSTRUCTION_AVAILABLE,
  94                     new OrPredicate(
  95                             IntrinsicPredicates.SHA256_INSTRUCTION_AVAILABLE,
  96                             IntrinsicPredicates.SHA512_INSTRUCTION_AVAILABLE));
  97 
  98     public static final BooleanSupplier SHA1_INTRINSICS_AVAILABLE
  99             = new AndPredicate(new AndPredicate(
 100                     IntrinsicPredicates.SHA1_INSTRUCTION_AVAILABLE,
 101                     IntrinsicPredicates.COMPILABLE_BY_C2),
 102                 IntrinsicPredicates.booleanOptionValue("UseSHA1Intrinsics"));
 103 
 104     public static final BooleanSupplier SHA256_INTRINSICS_AVAILABLE
 105             = new AndPredicate(new AndPredicate(
 106                     IntrinsicPredicates.SHA256_INSTRUCTION_AVAILABLE,
 107                     IntrinsicPredicates.COMPILABLE_BY_C2),
 108                 IntrinsicPredicates.booleanOptionValue("UseSHA256Intrinsics"));
 109 
 110     public static final BooleanSupplier SHA512_INTRINSICS_AVAILABLE
</pre></td><td><pre>

</pre><hr></hr><pre>
  54         long tieredMaxLevel = IntrinsicPredicates.WHITE_BOX.getIntxVMFlag(
  55                 "TieredStopAtLevel");
  56         boolean maxLevelIsReachable = (tieredMaxLevel
  57                 == IntrinsicPredicates.TIERED_MAX_LEVEL);
  58         return Platform.isServer() &amp;&amp; !Platform.isEmulatedClient() &amp;&amp; (!isTiered || maxLevelIsReachable);
  59     };
  60 
  61     public static final BooleanSupplier SHA1_INSTRUCTION_AVAILABLE
  62             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha1" }, null),
  63               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha1" }, null),
  64               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha1" }, null),
  65               // x86 variants
  66               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha" },  null),
  67               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha" },  null),
  68                               new CPUSpecificPredicate("x86.*",     new String[] { "sha" },  null))))));
  69 
  70     public static final BooleanSupplier SHA256_INSTRUCTION_AVAILABLE
  71             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha256"       }, null),
  72               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha256"       }, null),
  73               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha256"       }, null),
<span class="new">  74               new OrPredicate(new CPUSpecificPredicate("ppc64le.*", new String[] { "sha"          }, null),</span>
  75               // x86 variants
  76               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha"          }, null),
  77               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha"          }, null),
  78               new OrPredicate(new CPUSpecificPredicate("x86.*",     new String[] { "sha"          }, null),
  79               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "avx2", "bmi2" }, null),
<span class="changed">  80                               new CPUSpecificPredicate("x86_64",    new String[] { "avx2", "bmi2" }, null)))))))));</span>
  81 
  82     public static final BooleanSupplier SHA512_INSTRUCTION_AVAILABLE
  83             = new OrPredicate(new CPUSpecificPredicate("aarch64.*", new String[] { "sha512"       }, null),
  84               new OrPredicate(new CPUSpecificPredicate("s390.*",    new String[] { "sha512"       }, null),
  85               new OrPredicate(new CPUSpecificPredicate("sparc.*",   new String[] { "sha512"       }, null),
<span class="new">  86               new OrPredicate(new CPUSpecificPredicate("ppc64le.*", new String[] { "sha"          }, null),</span>
  87               // x86 variants
  88               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "sha"          }, null),
  89               new OrPredicate(new CPUSpecificPredicate("i386.*",    new String[] { "sha"          }, null),
  90               new OrPredicate(new CPUSpecificPredicate("x86.*",     new String[] { "sha"          }, null),
  91               new OrPredicate(new CPUSpecificPredicate("amd64.*",   new String[] { "avx2", "bmi2" }, null),
<span class="changed">  92                               new CPUSpecificPredicate("x86_64",    new String[] { "avx2", "bmi2" }, null)))))))));</span>
  93 
  94     public static final BooleanSupplier ANY_SHA_INSTRUCTION_AVAILABLE
  95             = new OrPredicate(IntrinsicPredicates.SHA1_INSTRUCTION_AVAILABLE,
  96                     new OrPredicate(
  97                             IntrinsicPredicates.SHA256_INSTRUCTION_AVAILABLE,
  98                             IntrinsicPredicates.SHA512_INSTRUCTION_AVAILABLE));
  99 
 100     public static final BooleanSupplier SHA1_INTRINSICS_AVAILABLE
 101             = new AndPredicate(new AndPredicate(
 102                     IntrinsicPredicates.SHA1_INSTRUCTION_AVAILABLE,
 103                     IntrinsicPredicates.COMPILABLE_BY_C2),
 104                 IntrinsicPredicates.booleanOptionValue("UseSHA1Intrinsics"));
 105 
 106     public static final BooleanSupplier SHA256_INTRINSICS_AVAILABLE
 107             = new AndPredicate(new AndPredicate(
 108                     IntrinsicPredicates.SHA256_INSTRUCTION_AVAILABLE,
 109                     IntrinsicPredicates.COMPILABLE_BY_C2),
 110                 IntrinsicPredicates.booleanOptionValue("UseSHA256Intrinsics"));
 111 
 112     public static final BooleanSupplier SHA512_INTRINSICS_AVAILABLE
</pre></td>
</tr></table>
<center><a href='../../../../../test/compiler/intrinsics/sha/cli/testcases/GenericTestCaseForOtherCPU.java.sdiff.html' target='_top'>&lt prev</a> <a href='../../../../../index.html' target='_top'>index</a> <a href='../../../../../src/cpu/ppc/vm/macroAssembler_ppc_sha.cpp.sdiff.html' target='_top'>next &gt</a></center>
</body></html>
